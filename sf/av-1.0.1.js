function sfpAdvancedValidity(){function e(e,t,r){e.forEach(e=>{let a=e.closest('[sf="cascader"]'),d=[a||e];d[0].querySelectorAll("*").forEach(e=>d.push(e)),d.forEach(e=>e.classList[r?"add":"remove"](i+t))})}let t="sfp-advanced-validity-js",i=StudioForm.config.comboClassPrefix,r=StudioForm.config.eventPrefix,a=["INPUT","SELECT","TEXTAREA"];StudioForm.forEach(i=>{let d=i.elements,l=d.mask;function o(){let e=i.record[i.record.length-1];return[...d.nexts,...i.logic[e].buttons.map(e=>e.element),]}!l.getAttribute(t)&&(l.setAttribute(t,""),e(o(),"disabled",!0),["change","input",r+"transition"].forEach(t=>l.addEventListener(t,t=>{e(o(),"disabled",!i.validate());let r=t.target;if(!a.includes(r.tagName)||"INPUT"==r.tagName&&["radio","checkbox","file"].includes(r.type))return;let d="sfp-required";if(r.hasAttribute(d)||!r.required&&r.value){r.required=!0;let l=i.validate(r);r.required=!l,r.setAttribute(d,"")}let s=i.validate(r);e([r],"valid",s),!s&&r.value&&"focusout"==t.type&&(e([r],"required",!0),setTimeout(()=>{i.reportValidity(r)},100))})))})}window.StudioForm=window.StudioForm||[],window.StudioForm.push(sfpAdvancedValidity);
